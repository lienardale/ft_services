Sending build context to Docker daemon  92.67kB
Step 1/8 : FROM alpine:latest
latest: Pulling from library/alpine
801bfaa63ef2: Pulling fs layer
801bfaa63ef2: Verifying Checksum
801bfaa63ef2: Download complete
801bfaa63ef2: Pull complete
Digest: sha256:3c7497bf0c7af93428242d6176e8f7905f2201d8fc5861f45be7a346b5f23436
Status: Downloaded newer image for alpine:latest
 ---> 389fef711851
Step 2/8 : COPY srcs/* srcs/
 ---> 64c993726e39
Step 3/8 : RUN apk update 	&& apk upgrade 	&& apk add nginx 	&& apk add openssl openssh
 ---> Running in e38579dab6a3
fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.12/community/x86_64/APKINDEX.tar.gz
v3.12.3-54-gc2a303485f [http://dl-cdn.alpinelinux.org/alpine/v3.12/main]
v3.12.3-54-gc2a303485f [http://dl-cdn.alpinelinux.org/alpine/v3.12/community]
OK: 12746 distinct packages available
OK: 6 MiB in 14 packages
(1/2) Installing pcre (8.44-r0)
(2/2) Installing nginx (1.18.0-r1)
Executing nginx-1.18.0-r1.pre-install
Executing busybox-1.31.1-r19.trigger
OK: 7 MiB in 16 packages
(1/10) Installing openssh-keygen (8.3_p1-r1)
(2/10) Installing ncurses-terminfo-base (6.2_p20200523-r0)
(3/10) Installing ncurses-libs (6.2_p20200523-r0)
(4/10) Installing libedit (20191231.3.1-r0)
(5/10) Installing openssh-client (8.3_p1-r1)
(6/10) Installing openssh-sftp-server (8.3_p1-r1)
(7/10) Installing openssh-server-common (8.3_p1-r1)
(8/10) Installing openssh-server (8.3_p1-r1)
(9/10) Installing openssh (8.3_p1-r1)
(10/10) Installing openssl (1.1.1i-r0)
Executing busybox-1.31.1-r19.trigger
OK: 14 MiB in 26 packages
Removing intermediate container e38579dab6a3
 ---> fd50f82431a9
Step 4/8 : RUN mkdir -p /run/nginx www && 	cp srcs/nginx.conf /etc/nginx/conf.d/default.conf && 	mv srcs/index.html /www/ &&     mv srcs/run.sh . &&     chmod 755 run.sh
 ---> Running in a3b61867811f
Removing intermediate container a3b61867811f
 ---> b779dd48c40f
Step 5/8 : RUN openssl req -new -newkey rsa:2048 -nodes -days 365 -x509 	-subj "/C=FR/ST=IDF/L=Paris/O=42/OU=Federation/CN=localhost" 	-keyout /etc/ssl/private/ssl.key -out /etc/ssl/certs/ssl.crt
 ---> Running in 111337c2c71e
[91mGenerating a RSA private key
[0m[91m.[0m[91m.[0m[91m.[0m[91m+[0m[91m+[0m[91m+[0m[91m+[0m[91m+
[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m..[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m.[0m[91m+[0m[91m+[0m[91m+[0m[91m+[0m[91m+
[0m[91mwriting new private key to '/etc/ssl/private/ssl.key'
[0m[91m-----
[0mRemoving intermediate container 111337c2c71e
 ---> 8523f16b7ae0
Step 6/8 : RUN ssh-keygen -A && adduser -D ssh_admin && echo "ssh_admin:0101" | chpasswd
 ---> Running in 2f700258aedd
ssh-keygen: generating new host keys: RSA DSA ECDSA ED25519 
[91mchpasswd: password for 'ssh_admin' changed
[0mRemoving intermediate container 2f700258aedd
 ---> 9d780e627702
Step 7/8 : EXPOSE 80 443 22
 ---> Running in 6e60ec73021c
Removing intermediate container 6e60ec73021c
 ---> 9a31f7ad0182
Step 8/8 : CMD ./run.sh
 ---> Running in 8e4fea355a59
Removing intermediate container 8e4fea355a59
 ---> 57d334a7dda5
Successfully built 57d334a7dda5
Successfully tagged monnginx:latest
